<html>
    <head>
        <title>C3 WebSocket Library</title>
    </head>
    <body>
        <!-- TODO: Chrome doesn't like that the server sends masked frames -->
        <p>Start the <code>example_server</code> and send some text to it via this field (may not work in Chrome for now):</p>
        <input id="message" onkeydown="if (event.keyCode === 13) sendMessage()"></input>
        <button onclick="sendMessage()">Send</button>
        <p id=response></p>
        <script>
            function sendMessage() {
                const ws = new WebSocket("ws://localhost:6969/");
                ws.onerror = (e) => {
                    console.log("WebSocket ERROR", e);
                    response.innerText = `WebSocket connection to server failed`;
                };
                ws.onopen = (e) => {
                    console.log("WebSocket OPEN", e);
                    ws.send(message.value);
                };
                ws.onmessage = (e) => {
                    console.log("WebSocket MESSAGE", e);
                    response.innerText = `Response from the server: ${e.data}`;
                };
                ws.onclose = (e) => {
                    console.log("WebSocket CLOSE", e);
                };
            }
        </script>
    </body>
</html>
